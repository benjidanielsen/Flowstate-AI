
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AI-first, self-improving CRM-OS for network marketers and solo founders">
      
      
        <meta name="author" content="Flowstate-AI Team">
      
      
        <link rel="canonical" href="https://benjidanielsen.github.io/Flowstate-AI/DEPLOYMENT_RUNBOOK/">
      
      
        <link rel="prev" href="../DEPLOYMENT_GUIDE/">
      
      
        <link rel="next" href="../SYSTEM_ARCHITECTURE/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Deployment Runbook - Flowstate-AI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deployment-runbook" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Flowstate-AI Documentation" class="md-header__button md-logo" aria-label="Flowstate-AI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flowstate-AI Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deployment Runbook
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/benjidanielsen/Flowstate-AI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    benjidanielsen/Flowstate-AI
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../INDEX/" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../GOVERNANCE/" class="md-tabs__link">
          
  
  
  Governance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../OPS_RUNBOOK/" class="md-tabs__link">
          
  
  
  Operations

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../CODING_STANDARDS/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../RISK_REGISTER/" class="md-tabs__link">
          
  
  
  Risk & Compliance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../FEDERATION_CHECKLIST/" class="md-tabs__link">
          
  
  
  Federation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/" class="md-tabs__link">
          
  
  
  API Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../integrations/" class="md-tabs__link">
          
  
  
  Integrations

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Flowstate-AI Documentation" class="md-nav__button md-logo" aria-label="Flowstate-AI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Flowstate-AI Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/benjidanielsen/Flowstate-AI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    benjidanielsen/Flowstate-AI
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DEPLOYMENT_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Deployment Runbook
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Deployment Runbook
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Required Secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Server Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Local Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Automated Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automated Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-initial-setup-first-time-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Initial Setup (First-Time Deployment)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Initial Setup (First-Time Deployment)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-clone-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Clone the Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-configure-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Configure Secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-run-the-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Run the Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-routine-operations" class="md-nav__link">
    <span class="md-ellipsis">
      3. Routine Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Routine Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-updating-the-system" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Updating the System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-checking-system-status" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Checking System Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-viewing-logs" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Viewing Logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-stopping-and-starting-services" class="md-nav__link">
    <span class="md-ellipsis">
      3.4. Stopping and Starting Services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-database-management" class="md-nav__link">
    <span class="md-ellipsis">
      4. Database Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Database Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-creating-a-new-migration" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Creating a New Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-running-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Running Migrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-rolling-back-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Rolling Back Migrations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      5. Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-security-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      6. Security Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Security Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staging-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Manual Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Manual Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Health Checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Health Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend-health-check" class="md-nav__link">
    <span class="md-ellipsis">
      Backend Health Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-health-check" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend Health Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-specific-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Service-Specific Health Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-container-health" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Container Health
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rollback-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      Rollback Procedures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rollback Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      Production Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emergency-rollback-critical" class="md-nav__link">
    <span class="md-ellipsis">
      Emergency Rollback (Critical)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-health-check-failures" class="md-nav__link">
    <span class="md-ellipsis">
      1. Health Check Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-database-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      2. Database Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-image-pull-failures" class="md-nav__link">
    <span class="md-ellipsis">
      3. Image Pull Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ssh-connection-failures" class="md-nav__link">
    <span class="md-ellipsis">
      4. SSH Connection Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-high-error-rates-after-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      5. High Error Rates After Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Debug Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-deployment-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Deployment Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post-Deployment Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-within-1-hour" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate (Within 1 hour)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#short-term-within-24-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Short-term (Within 24 hours)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#long-term-within-1-week" class="md-nav__link">
    <span class="md-ellipsis">
      Long-term (Within 1 week)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Checklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      During Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#emergency-contacts" class="md-nav__link">
    <span class="md-ellipsis">
      Emergency Contacts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SYSTEM_ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GOVERNANCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ETHICS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ethics Policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FEDERATION_CHARTER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Federation Charter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EMERGENT_BEHAVIOUR_OVERSIGHT_AND_CESSATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergent Behaviour Oversight
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Operations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OPS_RUNBOOK/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operations Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OPERATOR_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operator Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DR_RUNBOOK/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disaster Recovery Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SLOS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service Level Objectives
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AUDIT_TRAIL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit Trail
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CODING_STANDARDS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coding Standards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Decision Records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROADMAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../QUALITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quality Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Risk & Compliance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Risk & Compliance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RISK_REGISTER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Risk Register
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Policy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Federation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Federation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FEDERATION_CHECKLIST/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Federation Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../REVOCATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Revocation Process
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Integrations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Required Secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Server Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Local Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Automated Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automated Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-initial-setup-first-time-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Initial Setup (First-Time Deployment)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Initial Setup (First-Time Deployment)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-clone-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Clone the Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-configure-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Configure Secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-run-the-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Run the Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-routine-operations" class="md-nav__link">
    <span class="md-ellipsis">
      3. Routine Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Routine Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-updating-the-system" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Updating the System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-checking-system-status" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Checking System Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-viewing-logs" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Viewing Logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-stopping-and-starting-services" class="md-nav__link">
    <span class="md-ellipsis">
      3.4. Stopping and Starting Services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-database-management" class="md-nav__link">
    <span class="md-ellipsis">
      4. Database Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Database Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-creating-a-new-migration" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Creating a New Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-running-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Running Migrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-rolling-back-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Rolling Back Migrations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      5. Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-security-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      6. Security Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Security Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staging-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Manual Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Production Manual Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Health Checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Health Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend-health-check" class="md-nav__link">
    <span class="md-ellipsis">
      Backend Health Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-health-check" class="md-nav__link">
    <span class="md-ellipsis">
      Frontend Health Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-specific-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Service-Specific Health Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-container-health" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Container Health
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rollback-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      Rollback Procedures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rollback Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staging-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      Staging Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      Production Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emergency-rollback-critical" class="md-nav__link">
    <span class="md-ellipsis">
      Emergency Rollback (Critical)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-health-check-failures" class="md-nav__link">
    <span class="md-ellipsis">
      1. Health Check Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-database-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      2. Database Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-image-pull-failures" class="md-nav__link">
    <span class="md-ellipsis">
      3. Image Pull Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ssh-connection-failures" class="md-nav__link">
    <span class="md-ellipsis">
      4. SSH Connection Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-high-error-rates-after-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      5. High Error Rates After Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Debug Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-deployment-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Deployment Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post-Deployment Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-within-1-hour" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate (Within 1 hour)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#short-term-within-24-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Short-term (Within 24 hours)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#long-term-within-1-week" class="md-nav__link">
    <span class="md-ellipsis">
      Long-term (Within 1 week)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Checklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      During Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#emergency-contacts" class="md-nav__link">
    <span class="md-ellipsis">
      Emergency Contacts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/benjidanielsen/Flowstate-AI/edit/main/docs/DEPLOYMENT_RUNBOOK.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="deployment-runbook">Deployment Runbook<a class="headerlink" href="#deployment-runbook" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This runbook provides step-by-step procedures for deploying Flowstate-AI to staging and production environments. It covers both automated and manual deployment processes, health checks, rollback procedures, and troubleshooting.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#deployment-environments">Deployment Environments</a></li>
<li><a href="#automated-deployments">Automated Deployments</a></li>
<li><a href="#manual-deployments">Manual Deployments</a></li>
<li><a href="#health-checks">Health Checks</a></li>
<li><a href="#rollback-procedures">Rollback Procedures</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#post-deployment-tasks">Post-Deployment Tasks</a></li>
</ol>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="required-secrets">Required Secrets<a class="headerlink" href="#required-secrets" title="Permanent link">&para;</a></h3>
<p>Ensure the following GitHub secrets are configured:</p>
<p><strong>Staging:</strong>
- <code>STAGING_SSH_KEY</code>: SSH private key for staging server
- <code>STAGING_HOST</code>: Staging server hostname/IP
- <code>STAGING_USER</code>: SSH username for staging
- <code>STAGING_PORT</code>: SSH port (default: 22)
- <code>STAGING_URL</code>: Staging application URL</p>
<p><strong>Production:</strong>
- <code>PRODUCTION_SSH_KEY</code>: SSH private key for production server
- <code>PRODUCTION_HOST</code>: Production server hostname/IP
- <code>PRODUCTION_USER</code>: SSH username for production
- <code>PRODUCTION_PORT</code>: SSH port (default: 22)
- <code>PRODUCTION_URL</code>: Production application URL</p>
<h3 id="server-requirements">Server Requirements<a class="headerlink" href="#server-requirements" title="Permanent link">&para;</a></h3>
<p><strong>Staging:</strong>
- 1x VM (2 vCPU, 4GB RAM)
- PostgreSQL database
- Docker and Docker Compose installed
- SSH access configured</p>
<p><strong>Production:</strong>
- 2x VMs (4 vCPU, 8GB RAM each) for blue-green deployment
- PostgreSQL HA cluster
- Docker and Docker Compose installed
- Load balancer configured
- SSH access configured</p>
<h3 id="local-requirements">Local Requirements<a class="headerlink" href="#local-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>GitHub CLI (<code>gh</code>) installed and authenticated</li>
<li>SSH client configured</li>
<li>Docker installed (for building images)</li>
<li><code>jq</code> installed (for JSON parsing)</li>
</ul>
<h2 id="deployment-environments">Deployment Environments<a class="headerlink" href="#deployment-environments" title="Permanent link">&para;</a></h2>
<h3 id="staging-environment">Staging Environment<a class="headerlink" href="#staging-environment" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Testing and validation before production</li>
<li><strong>URL</strong>: https://staging.flowstate-ai.com</li>
<li><strong>Branch</strong>: <code>develop</code></li>
<li><strong>Deployment Trigger</strong>: Automatic on push to <code>develop</code> branch</li>
<li><strong>Deployment Strategy</strong>: Rolling update</li>
<li><strong>Downtime</strong>: Minimal (&lt; 30 seconds)</li>
</ul>
<h3 id="production-environment">Production Environment<a class="headerlink" href="#production-environment" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Live customer-facing environment</li>
<li><strong>URL</strong>: https://flowstate-ai.com</li>
<li><strong>Branch</strong>: <code>main</code> (tagged releases)</li>
<li><strong>Deployment Trigger</strong>: Manual via release or workflow dispatch</li>
<li><strong>Deployment Strategy</strong>: Blue-green deployment</li>
<li><strong>Downtime</strong>: Zero downtime</li>
</ul>
<h2 id="automated-deployments">Automated Deployments<a class="headerlink" href="#automated-deployments" title="Permanent link">&para;</a></h2>
<h3 id="staging-deployment">Staging Deployment<a class="headerlink" href="#staging-deployment" title="Permanent link">&para;</a></h3>
<p>Staging deployments are triggered automatically when code is pushed to the <code>develop</code> branch.</p>
<p><strong>Workflow</strong>: <code>.github/workflows/deploy-staging.yml</code></p>
<p><strong>Process</strong>:
1. Code is pushed to <code>develop</code> branch
2. GitHub Actions workflow is triggered
3. Docker images are built and pushed to GHCR
4. Images are deployed to staging server via SSH
5. Health checks are performed
6. Smoke tests are executed
7. Deployment status is reported</p>
<p><strong>Monitoring</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># View workflow runs</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>gh<span class="w"> </span>run<span class="w"> </span>list<span class="w"> </span>--workflow<span class="o">=</span>deploy-staging.yml
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># View specific run details</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>gh<span class="w"> </span>run<span class="w"> </span>view<span class="w"> </span>&lt;run-id&gt;
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Watch run in real-time</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>gh<span class="w"> </span>run<span class="w"> </span>watch<span class="w"> </span>&lt;run-id&gt;
</code></pre></div></p>
<p><strong>Manual Trigger</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Deploy specific version to staging</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>gh<span class="w"> </span>workflow<span class="w"> </span>run<span class="w"> </span>deploy-staging.yml<span class="w"> </span>-f<span class="w"> </span><span class="nv">version</span><span class="o">=</span>&lt;commit-sha&gt;
</code></pre></div></p>
<h3 id="production-deployment">Production Deployment<a class="headerlink" href="#production-deployment" title="Permanent link">&para;</a></h3>
<p>Production deployments are triggered by creating a release or manually via workflow dispatch.</p>
<p><strong>Workflow</strong>: <code>.github/workflows/deploy-production.yml</code></p>
<p><strong>Process</strong>:
1. Release is created with semantic version tag (e.g., v1.2.3)
2. Pre-deployment checks are performed
3. Docker images are built and pushed to GHCR
4. Database backup is created
5. Green environment is deployed
6. Health checks validate green environment
7. Traffic is switched to green environment
8. Blue environment is stopped
9. Post-deployment tasks are executed
10. Deployment status is reported</p>
<p><strong>Creating a Release</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Create and push a version tag</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.2.3<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Release v1.2.3&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>v1.2.3
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># Create GitHub release</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>gh<span class="w"> </span>release<span class="w"> </span>create<span class="w"> </span>v1.2.3<span class="w"> </span>--title<span class="w"> </span><span class="s2">&quot;v1.2.3&quot;</span><span class="w"> </span>--notes<span class="w"> </span><span class="s2">&quot;Release notes here&quot;</span>
</code></pre></div></p>
<p><strong>Manual Trigger</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Deploy specific version to production</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>gh<span class="w"> </span>workflow<span class="w"> </span>run<span class="w"> </span>deploy-production.yml<span class="w"> </span>-f<span class="w"> </span><span class="nv">version</span><span class="o">=</span>v1.2.3
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># Deploy with skipped tests (not recommended)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>gh<span class="w"> </span>workflow<span class="w"> </span>run<span class="w"> </span>deploy-production.yml<span class="w"> </span>-f<span class="w"> </span><span class="nv">version</span><span class="o">=</span>v1.2.3<span class="w"> </span>-f<span class="w"> </span><span class="nv">skip_tests</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
<h2 id="2-initial-setup-first-time-deployment">2. Initial Setup (First-Time Deployment)<a class="headerlink" href="#2-initial-setup-first-time-deployment" title="Permanent link">&para;</a></h2>
<p>This section covers the initial setup and deployment of the Flowstate-AI system.</p>
<h3 id="21-clone-the-repository">2.1. Clone the Repository<a class="headerlink" href="#21-clone-the-repository" title="Permanent link">&para;</a></h3>
<p>Clone the project repository to the deployment server:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/benjidanielsen/Flowstate-AI.git
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nb">cd</span><span class="w"> </span>Flowstate-AI
</code></pre></div>
<h3 id="22-configure-secrets">2.2. Configure Secrets<a class="headerlink" href="#22-configure-secrets" title="Permanent link">&para;</a></h3>
<p>Use the provided script to generate secure secrets and create the <code>.env.production</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>./scripts/setup-secrets.sh
</code></pre></div>
<p>Follow the prompts to configure domain names, ports, and other settings. The script will generate a <code>.env.production</code> file with secure defaults. <strong>Review this file and ensure all settings are correct for your environment.</strong></p>
<p><strong>IMPORTANT:</strong> Securely back up the <code>.env.production</code> file. It contains sensitive credentials and is critical for system operation.</p>
<h3 id="23-run-the-deployment">2.3. Run the Deployment<a class="headerlink" href="#23-run-the-deployment" title="Permanent link">&para;</a></h3>
<p>Execute the deployment script to build and start all services:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>./scripts/deploy-production.sh
</code></pre></div>
<p>This script will:</p>
<ol>
<li>Check for prerequisites.</li>
<li>Validate the <code>.env.production</code> file.</li>
<li>Pull the latest Docker images.</li>
<li>Build the application images.</li>
<li>Start the PostgreSQL and Redis services.</li>
<li>Run database migrations using <code>dbmate</code>.</li>
<li>Start all application services (backend, frontend, worker).</li>
<li>Perform a health check on all services.</li>
</ol>
<h2 id="3-routine-operations">3. Routine Operations<a class="headerlink" href="#3-routine-operations" title="Permanent link">&para;</a></h2>
<p>This section describes common operational tasks.</p>
<h3 id="31-updating-the-system">3.1. Updating the System<a class="headerlink" href="#31-updating-the-system" title="Permanent link">&para;</a></h3>
<p>To update the system to the latest version:</p>
<ol>
<li>
<p><strong>Pull the latest code:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main
</code></pre></div>
</li>
<li>
<p><strong>Run the deployment script:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>./scripts/deploy-production.sh
</code></pre></div>
<p>The script will automatically rebuild images and restart services.</p>
</li>
</ol>
<h3 id="32-checking-system-status">3.2. Checking System Status<a class="headerlink" href="#32-checking-system-status" title="Permanent link">&para;</a></h3>
<p>To check the health of all services, run the health check script:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>./scripts/health-check.sh
</code></pre></div>
<p>To view the status of running containers:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.production.yml<span class="w"> </span>ps
</code></pre></div>
<h3 id="33-viewing-logs">3.3. Viewing Logs<a class="headerlink" href="#33-viewing-logs" title="Permanent link">&para;</a></h3>
<p>To view the logs for all services in real-time:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.production.yml<span class="w"> </span>logs<span class="w"> </span>-f
</code></pre></div>
<p>To view the logs for a specific service:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.production.yml<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>&lt;service_name&gt;
</code></pre></div>
<p>(e.g., <code>backend</code>, <code>frontend</code>, <code>postgres</code>)</p>
<h3 id="34-stopping-and-starting-services">3.4. Stopping and Starting Services<a class="headerlink" href="#34-stopping-and-starting-services" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>To stop all services:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.production.yml<span class="w"> </span>down
</code></pre></div>
</li>
<li>
<p><strong>To start all services:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.production.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</li>
</ul>
<h2 id="4-database-management">4. Database Management<a class="headerlink" href="#4-database-management" title="Permanent link">&para;</a></h2>
<p>Database migrations are managed using <code>dbmate</code>.</p>
<h3 id="41-creating-a-new-migration">4.1. Creating a New Migration<a class="headerlink" href="#41-creating-a-new-migration" title="Permanent link">&para;</a></h3>
<p>To create a new migration file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>dbmate<span class="w"> </span>new<span class="w"> </span>&lt;migration_name&gt;
</code></pre></div>
<p>This will create a new SQL file in the <code>db/migrations</code> directory. Edit this file to define your schema changes.</p>
<h3 id="42-running-migrations">4.2. Running Migrations<a class="headerlink" href="#42-running-migrations" title="Permanent link">&para;</a></h3>
<p>To apply all pending migrations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>dbmate<span class="w"> </span>up
</code></pre></div>
<p>The deployment script automatically runs this command.</p>
<h3 id="43-rolling-back-migrations">4.3. Rolling Back Migrations<a class="headerlink" href="#43-rolling-back-migrations" title="Permanent link">&para;</a></h3>
<p>To roll back the last migration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>dbmate<span class="w"> </span>down
</code></pre></div>
<h2 id="5-troubleshooting">5. Troubleshooting<a class="headerlink" href="#5-troubleshooting" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Service Not Starting:</strong> Check the service logs (<code>docker-compose logs -f &lt;service_name&gt;</code>) for errors. Common issues include incorrect environment variables or port conflicts.</li>
<li><strong>Database Connection Issues:</strong> Ensure the <code>DATABASE_URL</code> in <code>.env.production</code> is correct and that the PostgreSQL container is running and healthy.</li>
<li><strong>Permission Errors:</strong> Ensure all scripts in the <code>scripts/</code> directory are executable (<code>chmod +x scripts/*.sh</code>).</li>
</ul>
<h2 id="6-security-best-practices">6. Security Best Practices<a class="headerlink" href="#6-security-best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Rotate Secrets:</strong> Regularly run <code>./scripts/setup-secrets.sh</code> to generate new secrets and update your <code>.env.production</code> file.</li>
<li><strong>Restrict Access:</strong> Limit access to the deployment server and the <code>.env.production</code> file.</li>
<li><strong>Enable HTTPS:</strong> For production deployments, configure Nginx with SSL/TLS certificates to enable HTTPS. The <code>docker/nginx/nginx.conf</code> file includes a template for this.</li>
<li><strong>Regularly Update:</strong> Keep the system and its dependencies up-to-date by pulling the latest code and re-deploying.</li>
</ul>
<h3 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h3>
<ol>
<li>Ensure you have SSH access to the target server</li>
<li>Verify Docker images are available in GHCR</li>
<li>Backup database before production deployments</li>
</ol>
<h3 id="staging-manual-deployment">Staging Manual Deployment<a class="headerlink" href="#staging-manual-deployment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># 1. SSH into staging server</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/staging_key<span class="w"> </span>user@staging-host
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># 2. Navigate to application directory</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nb">cd</span><span class="w"> </span>/opt/flowstate-ai
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="c1"># 3. Pull latest images</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/backend:staging-latest
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/frontend:staging-latest
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/python-worker:staging-latest
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="c1"># 4. Stop current containers</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>down
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="c1"># 5. Start new containers</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="c1"># 6. Verify health</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>ps
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://staging.flowstate-ai.com/health
</code></pre></div>
<h3 id="production-manual-deployment">Production Manual Deployment<a class="headerlink" href="#production-manual-deployment" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># 1. SSH into production server</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/production_key<span class="w"> </span>user@production-host
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># 2. Navigate to application directory</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="nb">cd</span><span class="w"> </span>/opt/flowstate-ai
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="c1"># 3. Create backup</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="nv">BACKUP_DIR</span><span class="o">=</span><span class="s2">&quot;/opt/flowstate-ai/backups/</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d_%H%M%S<span class="k">)</span><span class="s2">&quot;</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BACKUP_DIR</span><span class="s2">&quot;</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>flowstate-db<span class="w"> </span>pg_dump<span class="w"> </span>-U<span class="w"> </span>flowstate<span class="w"> </span>flowstate<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BACKUP_DIR</span><span class="s2">/database.sql&quot;</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="c1"># 4. Pull versioned images</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="nv">VERSION</span><span class="o">=</span><span class="s2">&quot;v1.2.3&quot;</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/backend:<span class="nv">$VERSION</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/frontend:<span class="nv">$VERSION</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/python-worker:<span class="nv">$VERSION</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="c1"># 5. Deploy to green environment</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.green.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="c1"># 6. Wait for green environment</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>sleep<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="c1"># 7. Health check green environment</span>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost:8081/health
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="c1"># 8. Switch traffic (update load balancer)</span>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="c1"># This step depends on your load balancer configuration</span>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="c1"># 9. Stop blue environment</span>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>down
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="c1"># 10. Promote green to blue</span>
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.green.yml<span class="w"> </span>down
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="c1"># 11. Verify production health</span>
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/health
</code></pre></div>
<h2 id="health-checks">Health Checks<a class="headerlink" href="#health-checks" title="Permanent link">&para;</a></h2>
<h3 id="backend-health-check">Backend Health Check<a class="headerlink" href="#backend-health-check" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Basic health check</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/health
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="c1"># Expected response:</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="c1"># {&quot;status&quot;:&quot;healthy&quot;,&quot;timestamp&quot;:&quot;2025-10-10T12:00:00Z&quot;}</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="c1"># Detailed health check with components</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/health<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="c1"># Check database connectivity</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/health/db<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
</code></pre></div>
<h3 id="frontend-health-check">Frontend Health Check<a class="headerlink" href="#frontend-health-check" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Check frontend is accessible</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># Check specific routes</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/dashboard
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/login
</code></pre></div>
<h3 id="service-specific-health-checks">Service-Specific Health Checks<a class="headerlink" href="#service-specific-health-checks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># Backend API</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/api/v1/health
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="c1"># Authentication service</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/api/v1/auth/status
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1"># Stats service</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/api/v1/stats
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="c1"># Python worker (internal)</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>flowstate-python-worker<span class="w"> </span>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost:8000/health
</code></pre></div>
<h3 id="docker-container-health">Docker Container Health<a class="headerlink" href="#docker-container-health" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># Check container status</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>docker-compose<span class="w"> </span>ps
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="c1"># Check container logs</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>backend
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>frontend
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>python-worker
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="c1"># Check container resource usage</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>docker<span class="w"> </span>stats<span class="w"> </span>--no-stream
</code></pre></div>
<h2 id="rollback-procedures">Rollback Procedures<a class="headerlink" href="#rollback-procedures" title="Permanent link">&para;</a></h2>
<h3 id="staging-rollback">Staging Rollback<a class="headerlink" href="#staging-rollback" title="Permanent link">&para;</a></h3>
<p>Staging rollbacks are automatic on deployment failure. For manual rollback:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># 1. SSH into staging server</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/staging_key<span class="w"> </span>user@staging-host
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="c1"># 2. Navigate to application directory</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="nb">cd</span><span class="w"> </span>/opt/flowstate-ai
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="c1"># 3. Stop current containers</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>down
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="c1"># 4. Pull previous version images</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/backend:staging-&lt;previous-sha&gt;
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/frontend:staging-&lt;previous-sha&gt;
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/python-worker:staging-&lt;previous-sha&gt;
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="c1"># 5. Start containers</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="c1"># 6. Verify health</span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://staging.flowstate-ai.com/health
</code></pre></div>
<h3 id="production-rollback">Production Rollback<a class="headerlink" href="#production-rollback" title="Permanent link">&para;</a></h3>
<p>Production rollbacks are automatic on deployment failure. For manual rollback:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># 1. SSH into production server</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/production_key<span class="w"> </span>user@production-host
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="c1"># 2. Navigate to application directory</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="nb">cd</span><span class="w"> </span>/opt/flowstate-ai
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="c1"># 3. Stop failed green environment</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.green.yml<span class="w"> </span>down
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="c1"># 4. Identify latest backup</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="nv">LATEST_BACKUP</span><span class="o">=</span><span class="k">$(</span>ls<span class="w"> </span>-t<span class="w"> </span>/opt/flowstate-ai/backups/<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="k">)</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Rolling back to: </span><span class="nv">$LATEST_BACKUP</span><span class="s2">&quot;</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="c1"># 5. Restore database if needed</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>flowstate-db<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>flowstate<span class="w"> </span>flowstate<span class="w"> </span>&lt;<span class="w"> </span><span class="s2">&quot;/opt/flowstate-ai/backups/</span><span class="nv">$LATEST_BACKUP</span><span class="s2">/database.sql&quot;</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="c1"># 6. Ensure blue environment is running</span>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="c1"># 7. Verify health</span>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/health
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="c1"># 8. Monitor for errors</span>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="w">  </span>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/health/errors<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.count&#39;</span>
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="w">  </span>sleep<span class="w"> </span><span class="m">10</span>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="k">done</span>
</code></pre></div>
<h3 id="emergency-rollback-critical">Emergency Rollback (Critical)<a class="headerlink" href="#emergency-rollback-critical" title="Permanent link">&para;</a></h3>
<p>If the system is completely down:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># 1. SSH into production server</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/production_key<span class="w"> </span>user@production-host
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="c1"># 2. Stop all containers</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="nb">cd</span><span class="w"> </span>/opt/flowstate-ai
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>down
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.green.yml<span class="w"> </span>down
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="c1"># 3. Restore from latest backup</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="nv">LATEST_BACKUP</span><span class="o">=</span><span class="k">$(</span>ls<span class="w"> </span>-t<span class="w"> </span>/opt/flowstate-ai/backups/<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="k">)</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>flowstate-db<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>flowstate<span class="w"> </span>flowstate<span class="w"> </span>&lt;<span class="w"> </span><span class="s2">&quot;/opt/flowstate-ai/backups/</span><span class="nv">$LATEST_BACKUP</span><span class="s2">/database.sql&quot;</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1"># 4. Start with last known good version</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/backend:v&lt;last-good-version&gt;
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/frontend:v&lt;last-good-version&gt;
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/python-worker:v&lt;last-good-version&gt;
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/compose.yml<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="c1"># 5. Verify and monitor</span>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>curl<span class="w"> </span>-f<span class="w"> </span>https://flowstate-ai.com/health
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>-f
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<h4 id="1-health-check-failures">1. Health Check Failures<a class="headerlink" href="#1-health-check-failures" title="Permanent link">&para;</a></h4>
<p><strong>Symptom</strong>: Health check endpoint returns 500 or times out</p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Check container logs</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>backend
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="c1"># Check database connectivity</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>flowstate-db<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>flowstate<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT 1&quot;</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="c1"># Check container status</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>docker-compose<span class="w"> </span>ps
</code></pre></div></p>
<p><strong>Resolution</strong>:
- Restart affected service: <code>docker-compose restart backend</code>
- Check database connection string
- Verify environment variables are set correctly</p>
<h4 id="2-database-connection-issues">2. Database Connection Issues<a class="headerlink" href="#2-database-connection-issues" title="Permanent link">&para;</a></h4>
<p><strong>Symptom</strong>: "Connection refused" or "Too many connections"</p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># Check database status</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>flowstate-db<span class="w"> </span>pg_isready
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="c1"># Check active connections</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>flowstate-db<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>flowstate<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT count(*) FROM pg_stat_activity&quot;</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="c1"># Check database logs</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>db
</code></pre></div></p>
<p><strong>Resolution</strong>:
- Increase max_connections in PostgreSQL config
- Check for connection leaks in application code
- Restart database: <code>docker-compose restart db</code></p>
<h4 id="3-image-pull-failures">3. Image Pull Failures<a class="headerlink" href="#3-image-pull-failures" title="Permanent link">&para;</a></h4>
<p><strong>Symptom</strong>: "manifest unknown" or "unauthorized"</p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># Verify image exists</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>docker<span class="w"> </span>manifest<span class="w"> </span>inspect<span class="w"> </span>ghcr.io/benjidanielsen/flowstate-ai/backend:v1.2.3
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="c1"># Check authentication</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>docker<span class="w"> </span>login<span class="w"> </span>ghcr.io
</code></pre></div></p>
<p><strong>Resolution</strong>:
- Verify image tag is correct
- Ensure GitHub token has package read permissions
- Re-authenticate: <code>echo $GITHUB_TOKEN | docker login ghcr.io -u USERNAME --password-stdin</code></p>
<h4 id="4-ssh-connection-failures">4. SSH Connection Failures<a class="headerlink" href="#4-ssh-connection-failures" title="Permanent link">&para;</a></h4>
<p><strong>Symptom</strong>: "Permission denied" or "Connection timed out"</p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1"># Test SSH connection</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>ssh<span class="w"> </span>-v<span class="w"> </span>-i<span class="w"> </span>~/.ssh/deploy_key<span class="w"> </span>user@host
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="c1"># Check SSH key permissions</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>ls<span class="w"> </span>-l<span class="w"> </span>~/.ssh/deploy_key
</code></pre></div></p>
<p><strong>Resolution</strong>:
- Verify SSH key has correct permissions: <code>chmod 600 ~/.ssh/deploy_key</code>
- Check server firewall rules
- Verify SSH key is added to server's authorized_keys</p>
<h4 id="5-high-error-rates-after-deployment">5. High Error Rates After Deployment<a class="headerlink" href="#5-high-error-rates-after-deployment" title="Permanent link">&para;</a></h4>
<p><strong>Symptom</strong>: Increased error count in monitoring</p>
<p><strong>Diagnosis</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># Check error logs</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>backend<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ERROR
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="c1"># Check error endpoint</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/health/errors<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="c1"># Check application metrics</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/metrics
</code></pre></div></p>
<p><strong>Resolution</strong>:
- Identify root cause from logs
- Consider immediate rollback if critical
- Apply hotfix if issue is minor</p>
<h3 id="debug-commands">Debug Commands<a class="headerlink" href="#debug-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># View all running containers</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>docker<span class="w"> </span>ps
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c1"># View container resource usage</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>docker<span class="w"> </span>stats
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="c1"># Execute command in container</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>flowstate-backend<span class="w"> </span>sh
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="c1"># View container logs (last 100 lines)</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>docker<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">100</span><span class="w"> </span>flowstate-backend
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="c1"># Follow container logs in real-time</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>flowstate-backend
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="c1"># Inspect container configuration</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>docker<span class="w"> </span>inspect<span class="w"> </span>flowstate-backend
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="c1"># Check Docker network</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>flowstate-network
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="c1"># Check Docker volumes</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>docker<span class="w"> </span>volume<span class="w"> </span>ls
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>docker<span class="w"> </span>volume<span class="w"> </span>inspect<span class="w"> </span>flowstate_data
</code></pre></div>
<h2 id="post-deployment-tasks">Post-Deployment Tasks<a class="headerlink" href="#post-deployment-tasks" title="Permanent link">&para;</a></h2>
<h3 id="immediate-within-1-hour">Immediate (Within 1 hour)<a class="headerlink" href="#immediate-within-1-hour" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Monitor Health Metrics</strong>
   <div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># Check health every 5 minutes for 1 hour</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..12<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">  </span>curl<span class="w"> </span>-s<span class="w"> </span>https://flowstate-ai.com/health<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.&#39;</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">  </span>sleep<span class="w"> </span><span class="m">300</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="k">done</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Review Error Logs</strong>
   <div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># Check for errors in last hour</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>--since<span class="w"> </span>1h<span class="w"> </span>backend<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ERROR
</code></pre></div></p>
</li>
<li>
<p><strong>Verify Critical Functionality</strong></p>
</li>
<li>Test user login</li>
<li>Test lead creation</li>
<li>Test reminder generation</li>
<li>Test NBA recommendations</li>
</ol>
<h3 id="short-term-within-24-hours">Short-term (Within 24 hours)<a class="headerlink" href="#short-term-within-24-hours" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Clear CDN Cache</strong> (if applicable)
   <div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1"># Example for Cloudflare</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://api.cloudflare.com/client/v4/zones/&lt;zone-id&gt;/purge_cache&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer &lt;api-token&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;purge_everything&quot;:true}&#39;</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Update Status Page</strong></p>
</li>
<li>Update deployment status</li>
<li>Note any known issues</li>
<li>
<p>Provide ETA for fixes</p>
</li>
<li>
<p><strong>Notify Stakeholders</strong></p>
</li>
<li>Send deployment notification</li>
<li>Include version number</li>
<li>
<p>Highlight new features or fixes</p>
</li>
<li>
<p><strong>Update Documentation</strong></p>
</li>
<li>Update CHANGELOG.md</li>
<li>Update version in README.md</li>
<li>Update API documentation if needed</li>
</ol>
<h3 id="long-term-within-1-week">Long-term (Within 1 week)<a class="headerlink" href="#long-term-within-1-week" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Performance Analysis</strong></li>
<li>Review response times</li>
<li>Check resource utilization</li>
<li>
<p>Identify optimization opportunities</p>
</li>
<li>
<p><strong>User Feedback Collection</strong></p>
</li>
<li>Monitor support tickets</li>
<li>Review user feedback</li>
<li>
<p>Track feature adoption</p>
</li>
<li>
<p><strong>Security Review</strong></p>
</li>
<li>Review security scan results</li>
<li>Address any new vulnerabilities</li>
<li>
<p>Update dependencies if needed</p>
</li>
<li>
<p><strong>Backup Verification</strong></p>
</li>
<li>Verify backups are being created</li>
<li>Test backup restoration</li>
<li>Update backup retention policy</li>
</ol>
<h2 id="deployment-checklist">Deployment Checklist<a class="headerlink" href="#deployment-checklist" title="Permanent link">&para;</a></h2>
<h3 id="pre-deployment">Pre-Deployment<a class="headerlink" href="#pre-deployment" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Code reviewed and approved</li>
<li>[ ] All tests passing</li>
<li>[ ] Security scans completed</li>
<li>[ ] Database migrations tested</li>
<li>[ ] Staging deployment successful</li>
<li>[ ] Backup created (production only)</li>
<li>[ ] Stakeholders notified</li>
<li>[ ] Rollback plan prepared</li>
</ul>
<h3 id="during-deployment">During Deployment<a class="headerlink" href="#during-deployment" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Deployment workflow triggered</li>
<li>[ ] Docker images built successfully</li>
<li>[ ] Images pushed to registry</li>
<li>[ ] Deployment to server completed</li>
<li>[ ] Health checks passed</li>
<li>[ ] Smoke tests passed</li>
<li>[ ] Traffic switched (production only)</li>
</ul>
<h3 id="post-deployment">Post-Deployment<a class="headerlink" href="#post-deployment" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Health metrics monitored</li>
<li>[ ] Error logs reviewed</li>
<li>[ ] Critical functionality verified</li>
<li>[ ] CDN cache cleared</li>
<li>[ ] Status page updated</li>
<li>[ ] Stakeholders notified</li>
<li>[ ] Documentation updated</li>
<li>[ ] Backup verified</li>
</ul>
<h2 id="emergency-contacts">Emergency Contacts<a class="headerlink" href="#emergency-contacts" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>DevOps Lead</strong>: [Contact Information]</li>
<li><strong>Backend Lead</strong>: [Contact Information]</li>
<li><strong>Database Admin</strong>: [Contact Information]</li>
<li><strong>Security Team</strong>: [Contact Information]</li>
<li><strong>On-Call Engineer</strong>: [Contact Information]</li>
</ul>
<h2 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../SYSTEM_ARCHITECTURE/">System Architecture Documentation</a></li>
<li><a href="../OPS_RUNBOOK/">Operations Runbook</a></li>
<li><a href="../DR_RUNBOOK/">Disaster Recovery Runbook</a></li>
<li><a href="../SECURITY/">Security Policy</a></li>
<li><a href="../api/">API Documentation</a></li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 12, 2025 05:55:16 UTC">October 12, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 10, 2025 10:09:58 UTC">October 10, 2025</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Flowstate-AI Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/benjidanielsen/Flowstate-AI" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>